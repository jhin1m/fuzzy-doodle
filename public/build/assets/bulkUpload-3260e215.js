import{$ as i}from"./dropzone-f13a1568.js";i.autoDiscover=!1;document.addEventListener("DOMContentLoaded",()=>{const a=document.querySelector("#submit-chapter"),l=document.querySelector("[name='content_id']");let s=0;const o=new i("#dropzone",{url:uploadUrl,paramName:"file",method:"POST",headers:{"X-CSRF-TOKEN":csrfToken},chunking:!0,forceChunking:!0,chunkSize:1e7,parallelChunkUploads:!0,retryChunks:!0,retryChunksLimit:3,maxFilesize:16384,acceptedFiles:".zip",autoProcessQueue:!0,uploadMultiple:!1,maxFiles:1,success:function(n,e){n.previewElement.dataset.name=e.filename},error:function(n,e){console.error(e)}});o.on("sending",(n,e)=>{const t=e.onload;e.onload=function(r){t(r)}}),o.on("complete",async n=>{s++,s===o.files.length&&(a.disabled=!1,a.addEventListener("click",c))});const c=async n=>{n.preventDefault();let e;o.files.forEach(t=>{e=t.previewElement.dataset.name});try{const r=await(await fetch(postUrl,{method:"POST",body:JSON.stringify({file:e,manga_id:l.value}),headers:{"Content-Type":"application/json","X-CSRF-TOKEN":csrfToken}})).json();(r.success||r.error)&&(window.location.href=urlRedirect)}catch(t){console.error(t)}}});
