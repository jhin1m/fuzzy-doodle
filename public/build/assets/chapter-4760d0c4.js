document.addEventListener("DOMContentLoaded",function(){const n=document.querySelectorAll(".chapter-image"),o=document.querySelectorAll("#chapter-width"),y=document.querySelector("#chapter-container"),a=document.querySelector("#chapter-scroll"),g=document.querySelector("#chapter-modal"),l=document.querySelectorAll("#reading-types"),E=document.querySelector("#modal-bg"),r=document.querySelector("#modal"),h=document.querySelector("#reset-settings"),L=document.querySelector("#save-settings"),v=localStorage.getItem("chapterWidth"),d=localStorage.getItem("chapterScrollValue"),f=localStorage.getItem("readingType");function k(){localStorage.removeItem("chapterWidth"),localStorage.removeItem("chapterScrollValue"),localStorage.removeItem("readingType"),o.forEach(e=>e.value="768px"),l.forEach(e=>e.value="long"),a.value="500",i("768px"),s(500),u()}function i(e){y.style.maxWidth=e,o.forEach(t=>t.value=e),localStorage.setItem("chapterWidth",e)}function s(e){localStorage.setItem("chapterScrollValue",e),n.forEach(t=>{t.addEventListener("click",c)})}function c(e){e.preventDefault();const t=Number(a.value)?Number(a.value):500;b(t)}function m(e){e.preventDefault();let t=document.querySelector(`[data-id="${e.target.dataset.id}"]`),p=document.querySelector(`[data-id="${Number(e.target.dataset.id)+1}"]`);p&&(t.classList.add("hidden"),p.classList.remove("hidden"))}function S(e){if(["single","double","long"].includes(e))switch(e){case"long":u();break;case"single":q();break;default:u();break}}function u(){localStorage.setItem("readingType","long"),n==null||n.forEach(e=>{var t;(t=e.classList)==null||t.remove("hidden"),e.removeEventListener("click",m),e.addEventListener("click",c)}),l.forEach(e=>e.value="long")}function q(){localStorage.setItem("readingType","single"),n==null||n.forEach(e=>{var t;e.dataset.id!=0&&((t=e.classList)==null||t.add("hidden")),e.removeEventListener("click",c),e.addEventListener("click",m)}),l.forEach(e=>e.value="single")}function b(e){window.scroll(0,window.scrollY+e)}h&&h.addEventListener("click",e=>{e.preventDefault(),k()}),v&&i(v),d?(a.value=d,s(Number(d))):n.forEach(e=>{e.addEventListener("click",c)}),f&&S(f),E.addEventListener("click",e=>{var t;(t=r.classList)==null||t.toggle("hidden")}),L.addEventListener("click",e=>{var t;e.preventDefault(),(t=r.classList)==null||t.toggle("hidden")}),l&&l.forEach(e=>{e.addEventListener("change",t=>{t.preventDefault(),S(t.target.value)})}),g&&g.addEventListener("click",e=>{var t;e.preventDefault(),(t=r.classList)==null||t.toggle("hidden")}),o.forEach(e=>{e.addEventListener("change",t=>{t.preventDefault(),i(t.target.value)})}),a&&a.addEventListener("change",e=>{e.preventDefault();const t=e.target.value;s(Number(t))})});
